version: '1.0'

# Bot behavior settings
bot:
  enabled: true
  mode: 'autonomous'  # autonomous | supervised
  schedule: '0 2 * * *'  # Cron schedule

# Gemini AI Configuration
gemini:
  # Model selection (use cheapest appropriate model)
  defaultModel: 'gemini-1.5-flash'  # $0.075-$0.30/M tokens
  models:
    simple: 'gemini-1.5-flash-8b'    # $0.0375-$0.15/M tokens - Simple queries
    standard: 'gemini-1.5-flash'      # $0.075-$0.30/M tokens - Standard tasks
    complex: 'gemini-1.5-pro'         # $1.25-$5.00/M tokens - Complex reasoning
  
  # Intelligent model selection based on task complexity
  autoSelectModel: true
  complexityThresholds:
    simple: 500        # Tokens < 500: use simple model
    standard: 2000     # Tokens < 2000: use standard model
    complex: 999999    # Tokens >= 2000: use complex model
  
  # Cost optimization settings
  costOptimization:
    enableBatchProcessing: true
    batchDelaySeconds: 60           # Wait 60s to batch requests
    maxBatchSize: 10
    
    # Context caching (75% cost reduction for repeated context)
    enableContextCaching: true
    contextCacheMinTokens: 32000    # Minimum tokens for caching
    contextCacheTTL: 3600           # 1 hour TTL
    
    # Spending limits
    dailySpendingLimit: 5.00        # $5/day max
    monthlySpendingLimit: 100.00    # $100/month max
    alertThreshold: 0.80            # Alert at 80% of limit
  
  # Generation parameters
  temperature: 0.3
  maxOutputTokens: 8096
  topP: 0.95
  topK: 40
  
  # Rate limiting and reliability
  rateLimitPerHour: 100
  enableCaching: true
  retryAttempts: 3
  retryDelay: 1000
  timeout: 60000

# Repositories to monitor
repositories:
  - name: 'fok666/selfhosted-devops'
    priority: 'high'
    enabled: true
  - name: 'fok666/github-selfhosted-runner'
    priority: 'high'
    enabled: true
  - name: 'fok666/gitlab-selfhosted-runner'
    priority: 'high'
    enabled: true
  - name: 'fok666/azure-devops-agent'
    priority: 'high'
    enabled: true
  - name: 'fok666/lambda-python-layer'
    priority: 'medium'
    enabled: true
  - name: 'fok666/openhqm'
    priority: 'high'
    enabled: true
  - name: 'fok666/openhqm-rm'
    priority: 'medium'
    enabled: true
  - name: 'fok666/openhqm-dashboard'
    priority: 'medium'
    enabled: true
  - name: 'fok666/aws-lambda-astrolog'
    priority: 'medium'
    enabled: true
  
# Document locations
documents:
  sdd: 'SDD.md'
  roadmap: 'ROADMAP.md'
  contributing: 'CONTRIBUTING.md'
  
# Code generation settings
codeGen:
  languages:
    - javascript
    - typescript
    - python
  style:
    javascript: 'prettier'
    typescript: 'prettier'
    python: 'black'
  testCoverage:
    minimum: 80

# Issue management
issues:
  enableTaskGeneration: true
  enableMemory: true
  enablePipelineMonitoring: true  # Monitor GitHub Actions for failures
  pipelineMonitoring:
    checkInterval: '0 */6 * * *'  # Every 6 hours
    lookbackHours: 24
    excludeWorkflows:
      - 'dependabot'
      - 'codeql'
    autoCreateIssues: true
    issuePriority: 'high'
  labelPrefix: 'ai-bot'
  labels:
    priority:
      - 'priority-high'
      - 'priority-medium'
      - 'priority-low'
    status:
      - 'status-ready'
      - 'status-in-progress'
      - 'status-blocked'
      - 'status-review'
      - 'status-done'
    type:
      - 'type-feature'
      - 'type-bugfix'
      - 'type-refactor'
      - 'type-docs'
      - 'type-investigate'  # For pipeline failures
      - 'type-ci-cd'  # CI/CD pipeline related
  autoClose: true
  closeOnMerge: true
  retentionDays: 90
    
# PR management
pullRequests:
  autoCreate: true
  autoMerge: false  # Disabled per SDD recommendation - enable per-repo if desired
  linkToIssue: true
  autoMergeConditions:
    allChecksPassed: true
    minApprovals: 1
    noRequestedChanges: true
    maxLinesChanged: 500
  branchPrefix: 'ai-bot/'
  reviewers: []
  labels:
    - 'ai-generated'
    - 'automated'
    
# Testing requirements
testing:
  runTests: true  # ENABLED for quality assurance
  frameworks:
    javascript: 'jest'
    python: 'pytest'
  requiredChecks:
    - 'test-validation'
    
# Self-improvement
selfImprovement:
  enabled: true
  metricsTracking: true
  configOptimization: 'manual-approval'
  
# CI/CD practices (continuous delivery)
agile:
  continuousDelivery: true
  smallBatchSize: true  # Small, frequent changes
  trunkBasedDevelopment: true
  maxWIP: 3  # Work in progress limit
  taskPrioritization: 'roadmap-driven'
  
# Safety & constraints
safety:
  maxFilesPerPR: 15
  maxLinesPerPR: 1000
  requireHumanReview:
    - 'critical-security'
    - 'database-migrations'
    - 'config-changes'
  protectedPaths:
    - '.github/workflows/'
